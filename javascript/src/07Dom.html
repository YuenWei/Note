<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dom</title>
  <style>
    button{border:none;padding:6px 15px;}
    a{cursor:pointer;}
    .dom{width:600px;height:auto;padding:20px;border:1px solid #999;display:flex;font-size:13px;float:left;margin-right:20px;}
    .dom p{height:14px;line-height:14px;}
    .dom-item{flex:1;}
    ul,li{list-style-type:none;margin:0;padding:0;}
    .item,ul{width:100%;}
    .item,ul,ul li{float:left;}
    .item ul li{padding:3px 6px;margin-right:10px;background:#0084ff;color:#fff;}
    label{width:100%;display:block;}
    button{display:block;margin-bottom:5px;}
    .focus p,.focus .btn{text-align:center;}
    .focus b{margin:0 3px;}
    .focus img{width:250px;height:250px;border:1px solid #f2f2f2;}
    .focus .btn button{margin:0 auto;display:inline;background:#0084ff;color:#fff;}
    table{border-collapse: collapse;}
    table td,table th{border:1px solid #f2f2f2;padding:6px 10px;}
    form{padding:10px;border:1px solid #f2f2f2;}
    label{margin:5px auto;text-align:center;}
    table a{color:#0084ff;}

    .box{width:100px;height:100px;background:#f00;border:5px solid #ffc107;margin:5px;padding:10px;box-shadow:0 5px 10px #333;overflow:auto;}
    .box1-1{width:50px;height:150px;background:#fba;}

    .box-mouse,.box-mouse-text{width:300px;border:1px solid #999;}
    .box-mouse{height:50px;}
    .box-mouse-text{height:30px;}

    .box-move{width:100px;height:100px;background:#f00;}
  </style>
  <script>
    // window.onload = function(){
    //   alert("页面加载完成后执行");
    // }
  </script>
</head>
<body>
  <h3>DOM</h3>
  <!-- 1. 文档节点document -->
  <button id="btn">按钮</button>
  <div class="dom">
    <div class="dom-item">
      <div class="item">
        <p>你喜欢的城市：</p>
        <ul id="city">
          <li id="beijing">北京</li>
          <li id="shanghai">上海</li>
          <li id="chengdu">成都</li>
          <li id="xi'an">西安</li>
        </ul>
      </div>
      <div class="item">
        <p>你喜欢的游戏：</p>
        <ul id="game">
          <li id="lol">英雄联盟</li>
          <li>王者荣耀</li>
          <li>天下三</li>
          <li>吃鸡</li>
        </ul>
      </div>
      <div class="item">
        <p>你手机的OS：</p>
        <ul id="phone">
          <li id="ios">iOS</li>
          <li id="android">Android</li>
          <li>WP</li>
        </ul>
      </div>
      <div class="item">
        <p>你的性别：</p>
        <label for="sex">
          <input type="radio" name="sex" id="male">Male
          <input type="radio" name="sex" id="fmale">Fmale
        </label>
      </div>
      <div class="item">
        <p>用户名：</p>
        <label for="name">
          <input type="text" name="name" id="username" placeholder="" value="icon">
        </label>
      </div>
    </div>
    <div class="dom-item">
      <button id="btn1">查找#beijing节点</button>
      <button id="btn2">查找所有li节点</button>
      <button id="btn3">查找name=sex的所有节点</button>
      <button id="btn4">查找#city下的所有li节点</button>
      <button id="btn5">返回#city下的所有节点</button>
      <button id="btn6">返回#phone的第一个子节点</button>
      <button id="btn7">返回#beijing的父节点</button>
      <button id="btn8">返回#andriod的前一个兄弟节点</button>
      <button id="btn9">返回#username的value属性</button>
      <button id="btn10">设置#username的value属性</button>
      <button id="btn11">返回#beijing的文本值</button>
    </div>
  </div>
  
  <!-- 练习：图片切换 -->
  <div class="dom">
    <div class="focus">
      <p>练习2：一共有<b id="imgNum"></b>张图，当前时第<b id="curImg"></b>张</p>
      <img id="focus-img" src="images/1.jpg">
      <div class="btn">
        <button id="prev">前一张</button>
        <button id="next">后一张</button>
      </div>
    </div>
    <div class="focus">
      <p>练习3：全选/全不选</p>
      <form action="" method="post">
        你爱好的运动是？<input type="checkbox" name="" id="checkdAll"> <br>

        <input type="checkbox" name="sports" id="" value="足球" />足球
        <input type="checkbox" name="sports" id="" value="篮球" />篮球
        <input type="checkbox" name="sports" id="" value="排球" />排球
        <input type="checkbox" name="sports" id="" value="水球" />水球 <br>

        <input type="button" id="btnCheckAll" value="全选">
        <input type="button" id="btnCheckNo" value="全不选">
        <input type="button" id="btnRev" value="反选">
        <input type="button" id="btnSubmit" value="提交">
      </form>
    </div>
  </div>

  <div class="dom">
    <div class="dom-item">
      <div class="item">
        <p>练习3:DOM增删改-你喜欢的城市：</p>
        <ul id="city2">
          <li id="beijing2">北京</li>
          <li id="shanghai">上海</li>
          <li id="chengdu">成都</li>
          <li id="xi'an">西安</li>
        </ul>
      </div>
    </div>
    <div class="dom-item">
      <button id="btn2-1">创建一个“广州”节点，添加到#city2下</button>
      <button id="btn2-2">将“广州”节点插入到#beijing2前</button>
      <button id="btn2-3">使用“广州”节点替换#beijing2节点</button>
      <button id="btn2-4">删除#beijing2节点</button>
      <button id="btn2-5">读取#city2内的html代码</button>
      <button id="btn2-6">设置#beijing2内的html代码</button>
      <button id="btn2-7">用innerHTML向city2中添加广州</button>
    </div>
  </div>

  <div class="dom">
    <div class="dom-item">
      <div class="item">
        <p>练习4:Ttabl 增删改：</p>
        <!-- 1.根据删除按钮删除所在行元素
        2.form表单增加信息 -->
        <table>
          <thead>
            <tr>
              <th>姓名</th><th>邮箱</th><th>操作</th>
            </tr>
          </thead>
          <tbody id="info-list">
            <tr><td>John</td><td>12306@qq.com</td><td><a>删除</a></td></tr>
            <tr><td>Tom</td><td>tom@163.com</td><td><a>删除</a></td></tr>
            <tr><td>HanMeiMei</td><td>hmm@qq.com</td><td><a>删除</a></td></tr>
          </tbody>
        </table>
      </div>
      
    </div>
    <div class="dom-item">
      <div class="item">
        <p>新增信息：</p>
        <form action="" method="post">
          <label for="name">姓名：<input type="text" name="name" id="name"></label>
          <label for="mail">邮箱：<input type="text" name="mail" id="mail"></label>
          <label for="mail"><input type="button" value="提交" id="btnAddInfo"></label>
        </form>
      </div>
    </div>
  </div>

  <div class="dom">
    <div class="box" id="box1">
      <div class="box1-1">

      </div>
    </div>
    <div class="dom-item">
      <input type="button" value="改长" id="btn-box-1">
    </div>
  </div>
  <div class="dom">
    <p>练习5:实时记录鼠标位置</p>
    <div class="box-mouse" id="box-mouse">
    </div><br/>
    <div class="box-mouse-text" id="box-mouse-text">
    </div>
  </div>
  <p>练习6:div跟随鼠标移动</p><br>
  <div class="dom" id="box-move-wrap" style="width:600px;height:300px;margin-right:0;position:relative;overflow: hidden;">
    <div class="box-move" id="box-move" style="position:absolute;"></div>
  </div>

  <div class="dom">
    <p>4.1 事件冒泡</p>
    <div id="event-pop" style="width:200px;height:200px;background:#ffc107">
      我是div<span id="event-pop-span" style="background:#fba;">我是span</span>
    </div>
  </div>

  <div class="dom">
    <p>4.3 事件绑定 addEventListener()</p>
    <button id="btn4-3">事件绑定</button>
  </div>

  <div class="dom">
    <p>4.4 事件传播</p>
    <div id="box4-4" style="width:300px;height:300px;background:#0084ff">
      <div id="box4-sub-1"  style="width:200px;height:200px;background:#fba">
        <div id="box4-sub-2"  style="width:100px;height:100px;background:#ffc107"></div>
      </div>
    </div>
  </div>

  <div class="dom">
    <p>4.5 拖拽</p>
    <div id="box4-5" style="width:300px;height:300px;background:#0084ff;">
      <div id="box4-5-sub"  style="width:50px;height:50px;display:inline-block;background:#fba;">
      </div>
    </div>
  </div>

  <div class="dom">
    <p>4.6 滚轮事件</p>
    <div id="box4-6"  style="width:50px;height:50px;display:inline-block;background:#fba;">
    </div>
  </div>

  <div class="dom">
    <p>4.7 键盘事件</p>
    <input type="text" name="" id="keyEvent-1">
  </div>
  <div class="dom" style="position:relative">
    <p>4.7.2 键盘事件</p>
    <div id="keyEvent-2" style="width:50px;height:50px;background:#f00;position:absolute;top:20px;left:20px;"></div>
  </div>

  <script>
    // 1.1 获取按钮对象
    var btn = document.getElementById("btn");
    console.log(btn);

    // 1.2修改button名称
    btn.innerHTML = "Button";

    // 1.3  添加事件 onclick,ondbclick
    btn.onclick = function(){
      alert("我点击了按钮");
    }

    //文档加载顺序
    // 浏览器在加载页面时，是按照自上而下的顺序加载的；
    // 读取到一行运行一行，如果将script代码写在页面的head里，在代码执行时，页面还没有加载；

    // onload事件在整个页面加载完成后再触发
    // window.onload = function(){};

    // 1.4 document获取元素节点
    // getElementById()  通过ID获取一个元素节点
    // getElementsByTagName()  通过标签名获取一组节点对象

    // 练习
    // 1.查找id=beijing的节点
    var btn1 = document.getElementById("btn1");
    btn1.onclick = function(){
      var beijing = document.getElementById("beijing");
      console.log(beijing);
      alert(beijing.innerText);
    }

    // 2.查找所有li节点
    var btn2 = document.getElementById("btn2");
    btn2.onclick = function(){
      //返回一个类数组对象，所有查询到的对象保存在这个类数组对象中
      var allLi = document.getElementsByTagName("li");
      console.log(allLi);
      //alert(allLi.length);
      for(var i=0; i<allLi.length; i++){
        console.log(allLi[i]);
      }
    }

    // 3. 查找name=sex的所有节点
    var btn3 = document.getElementById("btn3");
    btn3.onclick = function(){
      var names = document.getElementsByName("sex");
      console.log(names);
    }

    // 4. 查找#city下的所有li节点
    var btn4 = document.getElementById("btn4");
    btn4.onclick = function(){
      var lis = document.getElementById("city").getElementsByTagName("li")
      console.log(lis);
    }
    
    // 5. 查找#city下的所有子节点
    var btn5 = document.getElementById("btn5");
    btn5.onclick = function(){
      //childNodes 包括换行和空格
      var linode = document.getElementById("city").childNodes;
      console.log(linode.length);
      console.log(linode);
    }
    

    // 6. 返回#phone的第一个子节点
    var btn6 = document.getElementById("btn6");
    btn6.onclick = function(){
      //firstChild  子节点 firstElementChild  子元素
      var phone = document.getElementById("phone").firstElementChild
      console.log(phone);
    }

    // 7. 返回#beijing的父节点
    var btn7 = document.getElementById("btn7");
    btn7.onclick = function(){
      //parentNode  pareElement
      var pare = document.getElementById("beijing").parentNode;
      //var pare = document.getElementById("beijing").parentElement;
      console.log(pare);
    }

    // 8. 返回#andriod的前一个兄弟节点
    var btn8 = document.getElementById("btn8");
    btn8.onclick = function(){
      //previousSibling    previousElementSibling
      var pare = document.getElementById("android").previousSibling;
      // var pare = document.getElementById("android").previousElementSibling;
      console.log(pare);
    }

    // 9. 返回#username的value属性
    var btn9 = document.getElementById("btn9");
    btn9.onclick = function(){
      // .value .id .name  class是className
      var username = document.getElementById("username").value;
      console.log(username);
    }

    // 10. 设置#username的value属性
    var btn10 = document.getElementById("btn10");
    btn10.onclick = function(){
      var username = document.getElementById("username");
      username.value = "hello";
    }

    // 11. 返回#beijing的文本值
    var btn11 = document.getElementById("btn11");
    btn11.onclick = function(){
      var beijing2 = document.getElementById("beijing");
      //innerHtml innerText
      console.log(beijing2.innerText);
      //#beijing 里的标签内容也是 第一个子节点和最后一个子节点
      var beijing3 = document.getElementById("beijing").firstChild;
      console.log(beijing3.nodeValue);
    }
  </script>
  <script>
    var arrImg = ["images/1.jpg", "images/2.jpg", "images/3.jpg", "images/4.jpg", "images/5.jpg"];
    var btnLeft = document.getElementById("prev");
    var btnRight = document.getElementById("next");
    var imgSrc = document.getElementById("focus-img");
    var imgIndex = 0;
    document.getElementById("imgNum").innerText = arrImg.length;
    document.getElementById("curImg").innerText = (imgIndex + 1);
    btnLeft.onclick = function(){
      imgIndex--;
      if(imgIndex<0){
        imgIndex = arrImg.length - 1;
      }
      imgSrc.src = arrImg[imgIndex];
      document.getElementById("curImg").innerText = (imgIndex + 1);
    }
    btnRight.onclick = function(){
      imgIndex++;
      if(imgIndex>(arrImg.length - 1)){
        imgIndex = 0;
      }
      imgSrc.src = arrImg[imgIndex];
      document.getElementById("curImg").innerText = (imgIndex + 1);
    }
  </script>
  <script>
    // 3.1 全选
    var checkAll = document.getElementById("btnCheckAll");
    checkAll.onclick = function(){
      var checkAllInput = document.getElementsByName("sports");
      for(var i=0; i<checkAllInput.length; i++){
        checkAllInput[i].checked = true;
      }
    }

    // 3.2 全不选
    var checkAllNo = document.getElementById("btnCheckNo");
    checkAllNo.onclick = function(){
      var checkAllNoInput = document.getElementsByName("sports");
      for(var i=0; i<checkAllNoInput.length; i++){
        checkAllNoInput[i].checked = false;
      }
    }

    // 3.3 反选
    var checkRev = document.getElementById("btnRev");
    checkRev.onclick = function(){
      var checkRevInput = document.getElementsByName("sports");
      for(var i=0; i<checkRevInput.length; i++){
        checkRevInput[i].checked = !checkRevInput[i].checked;
      }
    }

    // 3.4 提交
    var checkSubmit = document.getElementById("btnSubmit");
    checkSubmit.onclick = function(){
      var checkSubmitInput = document.getElementsByName("sports");
      var checkSport = [];
      for(var i=0; i<checkSubmitInput.length; i++){
        if(checkSubmitInput[i].checked == true){
          console.log(checkSubmitInput[i]);
          checkSport.push(checkSubmitInput[i].value);
        }
        
      }
      console.log(checkSport);
    }

    // 3.5 全选/全不选
    // 第一步：根据按钮checkbox状态，设置列表checkbox的状态
    var revCheck = document.getElementById("checkdAll");
    var sports = document.getElementsByName("sports");
    var checkNum = 0;
    var sportLength = sports.length;
    revCheck.onclick = function(){
      for(var i=0; i<sportLength; i++){
        // 默认不选，当点击后，列表checkbox状态等于按钮checkbox状态
        sports[i].checked = this.checked;
      }
      /*console.log(checkNum);
      if(checkNum<sportLength){
        for(var i=0; i<sportLength; i++){
          sports[i].checked = true;
          console.log("设置为true");
        }
        revCheck.checked = true;
      }else{
        for(var i=0; i<sports.length; i++){
          sports[i].checked = false;
        }
        revCheck.checked = false;
      }*/
    }
    // 第二步：四个多选框分别绑定onclick()事件，监听sport列表选择状态，改变全选/全不选状态
    for(var j=0; j<sportLength;j++){
      sports[j].onclick = function(){
        console.log("点击了列表checkbox");
        //监听列表checkbox的状态
        //m默认全选中
        revCheck.checked = true;
        for(var n=0; n<sportLength;n++){  
          //遇到不全选，立即设置为false，通知循环
          if(!sports[n].checked){
          revCheck.checked = false;
          break;
          }
        }
      }
    }

    //剩余问题： 全选/全不选/反选 按钮影响 (全选/全不选)状态

    // 其他DOM查询方法
    /*
    1.6 获取body元素 
    //方法一
    var body = getElementBytagName("body")[0]

    //方法二
    var body = document.body;

    1.7 获取html元素
    var html = document.documentElement;

    1.8 获取所有元素all
    var all = document.all;
    var all = document.getElementsByTagName("*");

    1.9 获取ClassName元素 IE9+
    var className = document.getElementsByClassName(".class");

    1.10  querySelector()
    **IE8+**
      - 选择器字符串查询元素
      - 使用该方法，返回唯一一个元素，如果满足的条件有多个，只返回第一个
    var div = document.querySelector(".wrap .w1100");
    */
  </script>
  <script>
    // 2 DOM 增删改
    // 都是在父节点下操作子节点
    // 2.1 创建节点
    var city2 = document.getElementById("city2");
    var beijing2 = document.getElementById("beijing2");
    // -1 创建元素,传递创建元素标签
    var addLi = document.createElement("li");
    // -2 创建文本节点
    var addText = document.createTextNode("广州");
    // -3 将addText 设置为addLi 的子节点
    addLi.appendChild(addText);
    console.log(addLi);

    // 按钮1:创建一个“广州”节点，添加到#city2下
    var btn2_1 = document.getElementById("btn2-1");
    btn2_1.onclick = function(){
      city2.appendChild(addLi);
    }

    // 按钮2:将“广州”节点插入到#beijing2前
    var btn2_2 = document.getElementById("btn2-2");
    btn2_2.onclick = function(){
      city2.insertBefore(addLi, beijing2);
    }

    // 按钮3:使用“广州”节点替换#beijing2节点
    var btn2_3 = document.getElementById("btn2-3");
    btn2_3.onclick = function(){
      city2.replaceChild(addLi, beijing2)
    }

    // 按钮4:删除#beijing2节点
    var btn2_4 = document.getElementById("btn2-4");
    btn2_4.onclick = function(){
      city2.removeChild(beijing2);
      // beijing2.parentNode.removeChild(beijing2);
    }

    // 按钮5:读取#city2内的html代码
    var btn2_5 = document.getElementById("btn2-5");
    btn2_5.onclick = function(){
      var city2HTML = city2.innerHTML;
      console.log(city2HTML);
    }

    // 按钮6:设置#beijing2内的html代码
    var btn2_6 = document.getElementById("btn2-6");
    btn2_6.onclick = function(){
      var addInfo = '<b>帝都</b>';
      beijing2.innerHTML = addInfo;
    }

    // 按钮7:用innerHTML向city2中添加广州
    var btn2_7 = document.getElementById("btn2-7");
    btn2_7.onclick = function(){
      //city2.innerHTML += addHTML; //等于删了重新加入，可能会影响事件
      // -1 创建元素
      var addElement = document.createElement("li");
      addElement.innerHTML = "广州";
      city2.appendChild(addElement);
    }
  </script>
  <script>
    //2.9 抽出单击事件，当新增信息时需要绑定点击事件
    function deleteInfo() {
      allTagA[i].onclick = function(){
        //获取到当前a标签的父节点tr
        var curTr = this.parentNode.parentNode;
        // var curName = curTr.getElementsByTagName("td")[0].innerText;
        var curName = curTr.firstElementChild.innerText;
        //console.log(curTr);
        //1.3 删除节点
        var flag = confirm("确认删除" + curName + "吗？");
        if(flag){
          curTr.parentNode.removeChild(curTr);
        }
      }
    };
    // 1. 删除
    // 1.1 获取table里所有阿标签
    var allTagA = document.getElementsByTagName("a");
    // 1.2 遍历a标签
    for(var i=0; i<allTagA.length; i++){  //for循环在页面加载完后执行，故i=3,然后才是点击响应事件
      //console.log(allTagA[i]);
      allTagA[i].onclick = deleteInfo;  //不加(),使用的是对象，不是函数的返回值
      // allTagA[i].onclick = function(){
      //   //获取到当前a标签的父节点tr
      //   var curTr = this.parentNode.parentNode;
      //   // var curName = curTr.getElementsByTagName("td")[0].innerText;
      //   var curName = curTr.firstElementChild.innerText;
      //   //console.log(curTr);
      //   //1.3 删除节点
      //   var flag = confirm("确认删除" + curName + "吗？");
      //   if(flag){
      //     curTr.parentNode.removeChild(curTr);
      //   }
      // }
    }

    // 2. 增加
    var btnAddInfo = document.getElementById("btnAddInfo");
    btnAddInfo.onclick = function(){
      // 2.1 获取表单的值
      var addName = document.getElementById("name").value;
      var addMail = document.getElementById("mail").value;
      console.log(addName + addMail);
      if(addName == "" || addMail == ""){
        alert("输入不能为空");
      }else{
        //2.2 创建4个子元素
      /*  var infoTr = document.createElement("tr");
        var nameTd = document.createElement("td");
        var mailTd = document.createElement("td");
        var aTd = document.createElement("td");
        var aTag = document.createElement("a");
        // 2.3 创建3个子文本
        var nameText = document.createTextNode(addName);
        var mailText = document.createTextNode(addMail);
        var aText = document.createTextNode("删除");
        // 2.4 文本添加td节点
        nameTd.appendChild(nameText);
        mailTd.appendChild(mailText);
        aTag.appendChild(aText);
        aTd.appendChild(aTag);
        // 2.5 所有td添加到tr
        infoTr.appendChild(nameTd);
        infoTr.appendChild(mailTd);
        infoTr.appendChild(aTd);
        // 2.6为新增的a绑定单击事件
        // aTag.href = "javascript:;"
        aTag.onclick = deleteInfo;
        */

        // 代码优化2.2-2.5 innerHTML
        var infoTr = document.createElement("tr");
        infoTr.innerHTML = "<td>" + addName + "</td><td>" + addMail+ "</td><td><a>删除</a></td>";
        infoTr.getElementsByTagName("a")[0].onclick = deleteInfo;

        // 2.7 将tr添加到table 注意table>tbody结构
        console.log(infoTr);
        document.getElementById("info-list").appendChild(infoTr);
      }
    }
  </script>

  <script>
    // 3 DOM操作CSS
    // 元素.style.样式名 = 样式值;
    var btnBox1 = document.getElementById("btn-box-1");
    btnBox1.onclick =function(){
      var box1 = document.getElementById("box1");
      // 3.1 修改width
      box1.style.width = "250px";
      // 3.1 修改backgroundColor
      box1.style.backgroundColor = "#ff0";

      // 3.2-1 currentStyle 读取当前显示的样式
      // 语法：元素.style.currentStyle.样式名  仅支持IE
      //如：在原来的基础上增加100px宽度
      // var currentStyle = box1.currentStyle.width;
      // var currentStyle = box1.currentStyle['width'];
      // console.log(currentStyle);

      // 3.2-2 getComputedStyle()
      /*
      不支持IE8及一下
      此方法是window的方法，可以直接使用
        - 参数1：要获取的元素；
        - 参数2：可以传递一个伪元素，一般都为null；
      该方法会返回一个对象，对象中封装了当前元素的样式。获取到的是具体长度等，不会是auto。
      */
      var currentStyle = getComputedStyle(box1, null).width;
      console.log(currentStyle);

      // 3.2 兼容所有浏览器，结合3.2-1和3.2-2
      function getStyle(obj, name){
        //不写window，在IE8中以为变量，会全局寻找，没找到会报错，故需加window
        if(window.getComputedStyle){
          return getComputedStyle['name'];
        }else{
          return obj.currentStyle['name']
        }
      }
    }

    // 3.5 其他DOM对象方法
    // 3.5.1 clientHeight
    var clientHeight = box1.clientHeight;
    console.log("clientHeight = " + clientHeight);

    // 3.5.2 offsetHeight
    var offsetHeight = box1.offsetHeight;
    console.log("offsetHeight =" + offsetHeight);

    // 3.5.3 scorllHeight
    var scrollHeight = box1.scrollHeight;
    console.log("scorllHeight =" + scrollHeight);
  </script>
  <script>
    // 4 Event对象
    // https://www.w3school.com.cn/jsref/dom_obj_event.asp
    // 事件对象
    // - 当事件的响应函数被触发时，浏览器每次都会将一个事件对象作为实参传递给响应函数；
    // - 在事件对象中，封装了当前事件的一切信息，比如：鼠标坐标，键盘按键，鼠标滚动方向

    // 练习5:实时记录鼠标位置
    var mouseArea = document.getElementById("box-mouse");
    var mouseText = document.getElementById("box-mouse-text");
    mouseArea.onmousemove = function(){
      var x = event.clientX;
      var y = event.clientY;
      var axisInfo = "x=" + x + ", y=" + y;
      mouseText.innerText = axisInfo;
    }
    mouseArea.onmouseout =function(){
      var axisInfo = "";
      mouseText.innerText = axisInfo;
    }

    // 兼容性改进
    // 方法一：
    // if(!event){
    //   event = window.event;
    // }

    // 方法二：
    // if(event = event || window.event){
    // }


    // 练习6:div跟随鼠标移动
    var boxMoveWrap = document.getElementById("box-move-wrap");
    var boxMove = document.getElementById("box-move");
    
    var wrapLeft = boxMoveWrap.offsetLeft;
    var wrapTop = boxMoveWrap.offsetTop;
    console.log("wrap坐标left:" + wrapLeft + ",top:" + wrapTop);

    boxMoveWrap.onmousemove = function(){
      var left = event.pageX;
      var top = event.pageY;
      console.log("left:" + left + ",top:" + top);
      boxMove.style.left = (left - wrapLeft) + "px";
      boxMove.style.top = (top - wrapTop) + "px";
    }

    // 4.1 事件冒泡 Bubble
    // - 指相同事件向上传导：当子元素的事件触发时，其祖先元素也会触发相同的事件；
    // - 如果不希望发生冒泡事件，可以**通过事件对象取消冒泡；
    //    event.cancelBubble = true;
    var eventPop = document.getElementById("event-pop");
    var eventPopSpan = document.getElementById("event-pop-span");
    
    document.body.onclick = function(event){
      // 取消事件冒泡
      console.log("点了body");
    }
    eventPop.onclick = function(){
      console.log("点了box-pop");
      event.cancelBubble = true;  // 取消事件冒泡
    }
    
    eventPopSpan.onclick = function(){
      event.cancelBubble = true;  // 取消事件冒泡
      console.log("点了span");
    }

    // 4.2 事件委派
    // - 只绑定一次事件，即可应用到多个元素上，即使是后来添加的；
    // - 可以绑定到其共同的父元素。
    // event.target  表示触发事件的对象
    // ul.onclick = function(event){
    //   event = event || event = window.event
    //   //如果触发事件是期望的元素则执行，否则不执行
    //   if(event.target.tagName == "a"){
    //   //执行绑定
    //   }
    // }

    // 4.3 事件绑定
    // 使用 对象.事件= 函数 的形式
    // - 只能同时为一个元素的一个事件绑定一个响应函数
    // - 不能绑定多个，如果绑定多个，则后面的会覆盖掉前面的
    // addEventListener() 绑定函数
    //  参数1：事件的字符串，不要on;
    //  参数2：回调函数，当事件触发时执行的函数；
    //  参数3：是否在捕获阶段触发，需要一个boolean值，一般都传false；
    var btn4_3 = document.getElementById("btn4-3");
    btn4_3.addEventListener("click", function(){
      console.log("绑定的第1个事件");
      alert(this);
    }, false)
    btn4_3.addEventListener("click", function(){
      console.log("绑定的第2个事件");
    }, false)

    // addEventListener() 不支持I8E及以下，可以使用attachEvent()。
    // attachEvent()
    // 参数1：事件字符串，要on;
    // 参数1：funciton(){}。

    // 注意：执行顺序和addEventListener()想反
    // btn4_3.attachEvent("onclick",function(){
    //   console.log("attachEvent(),支持I8E及以下");
    // })

    // addEventListener()中的this是绑定事件的对象；
    // attachEvent()中的this是window
    //统一两个方法的this
    function bind(obj, eventStr, callback){
      if(obj.addEventListener){
        //大部分现代浏览器
        obj.addEventListener(eventStr, callback, false)
      }else{
        /* this是谁由调用方式决定；
           callback.call(obj)
        */
        //IE8及以下
        obj.attachEvent("on"+eventStr, function(){
          //在匿名函数中调用回调函数
          callback;
        })
      }
    }

    /* 4.4 事件传播
          - 关于时间的传播，网景和微软有不同的理解
          - 微软认为，事件应该由内而外传播，也就是说事件应该在冒泡阶段执行；
          - 网景认为，事件应该由外而内，也就是说事件应该先触发最外曾的事件，然后向内传播给后代。
          - W3C 综合了两家公司防范，将事件传播定义分成了三个阶段
            1.捕获阶段：从最外层开始向目标元素进行时间的捕获，但不执行触发事件；
            2.目标阶段：事件捕获到目标元素，捕获结束，开始在目标元素上执行触发事件；
            3.冒泡阶段：事件从目标元素开始从父节点传递，依次执行触发事件。
    */

    // 4.5 拖拽
    // 拖拽流程
    //   1.当鼠标在被拖拽元素上按下时，开始拖拽 onmousedown
    //   2.当鼠标移动时被拖拽元素跟随鼠标移动 onmousemove
    //   3.当鼠标松开时，被拖拽元素固定在当前位置 onmouseup

    var box_sub = document.getElementById("box4-5-sub");
    // 1. 开始拖拽
    box_sub.onmousedown = function(){
      console.log("开始拖拽");
      //拖拽左上角偏移问题，指针位置保持不动
      // 计算鼠标点击坐标距离被拖拽元素的值 clientX-offsetLeft
      // event = event || window;

      // IE8不起作用，可用element.setCapture()捕获
      //   - 当调用一个元素的setCapture()后，这个元素将会把下一个鼠标按下的任意事件捕获到自己身上
      if(box_sub.setCapture()){  //如果IE8则执行
        box_sub.setCapture()
      };

      var boxTop = event.clientX - box_sub.offsetLeft;
      var boxLeft = event.clientY - box_sub.offsetTop;
      console.log(boxTop, boxLeft);
      // 2. 移动
      document.onmousemove = function(){
        console.log("拖拽ing");
        var left = event.clientX;
        var top = event.clientY;
        console.log(left,top);
        box_sub.style.marginLeft= (left - boxLeft) + "px";
        box_sub.style.marginTop = (top - boxTop) + "px";
      };

      //当鼠标松开时，被拖拽元素停留在当前位置
      //取消document的onmousemove事件
      document.onmouseup = function(){
        document.onmousemove = null;
        // 取消document.onmouseup事件
        document.onmouseup = null;

        // 需要在鼠标松开的时候，取消setCapture(),使用 el.releaseCapture();
        box_sub.releaseCapture();
      };

      // 当我们拖拽一个网页时，浏览器会默认取搜索引擎搜索该内容
      // 此时会导致拖拽功能的异常，这个是浏览器提供的默认行为；
      // 若不希望发生，则可以通过return false来取消默认行为
      return false;
    }

    // 4.6 滚轮事件 onmousewheel
    // 火狐不支持，可食用4.3的定义的bind函数；
    var box4_6 = document.getElementById("box4-6");
    box4_6.onmousewheel = function(){
      // console.log("滚轮动了～～");
      // 判断滚轮方向
      // event.wheelDelta; 向上滚是120，向下滚是-120
      // 火狐使用event.detail; 向上滚是-3，向下滚是3
      if(event.wheelDelta > 0 || event.detail < 0){
        console.log("向上滚～～");
        box4_6.style.width = box4_6.clientWidth - 10 + "px";
        box4_6.style.height = box4_6.clientHeight - 10 + "px";
      }else{
        box4_6.style.width = box4_6.clientWidth + 10 + "px";
        box4_6.style.height = box4_6.clientHeight + 10 + "px";
      }

      // 当滚轮滚动时，如果浏览器有滚动条，则滚动条会随之滚动；
      // 随之滚动是浏览器默认事件，取消则使用 return false;
      return false;
      // 火狐使用的是addEventListener()方法绑定，取消默认事件不能用return false;
      // 需要使用event.preventDefault();
      event.preventDefault();

    }
    bind(box4_6, "DommouseScroll", function(){
      console.log("[火狐]滚轮动了～～");
    })
    //此处需要两次写滚轮执行事件，可以函数方式调用

    // 4.7 键盘事件
    // 键盘事件一般绑定给可以获取到焦点的对象或document
    // 4.7.1 onkeydown
        // 对于onkeydown来说，按着一直不放，则会连续触发；
        // 当onkeydown连续触发时，第2次和第一次间隔时间稍长，其他会非常快，设计的目标是为了防止误操作；
    // 4.7.2 onkeyup
        // onkeyuo则不会连续触发
    window.onload = function(){
      document.onkeydown = function(){
        console.log("我按了键盘");
        //altKey shiftKey ctrlKey 是否按了alt shift ctrl 键
        // 获取其他字符通过keycode
        console.log(event.keyCode);

        //  判断是否按了y键
        if(event.keyCode === 89){
          console.log("我按了y键");
        }
        // 判断是否同时按了某两个键
        if(event.keyCode === 89 && event.shiftKey){
          console.log("我同时按了 ctrl + y");
        }

        // 练习 方向键 移动button
        var keyEvent2 = document.getElementById("keyEvent-2");
        var speed = 10;
        // 按了ctrl 加速
        if(event.altKey){
          speed = 50;
        }
        switch(event.keyCode){
        case 37:
          console.log("<-");
          keyEvent2.style.left = (keyEvent2.offsetLeft - speed) + 'px';
          break;
        case 38:
          keyEvent2.style.top = (keyEvent2.offsetTop - speed) + 'px';
          break;
        case 39:
          keyEvent2.style.left = (keyEvent2.offsetLeft + speed) + 'px';
          break;
        case 40:
          keyEvent2.style.top = (keyEvent2.offsetTop + speed) + 'px';
          break;
        }

      }

      document.onkeyup = function(){
        console.log("我松开了键盘");
      }

      // 判断input 是否触发键盘事件
      var keyEvent1 = document.getElementById("keyEvent-1");
      keyEvent1.onkeydown = function(){
        console.log("我在input按了键盘");
        // 在文本框中输入内容，属于onkeydown的默认行为
        // 如果在onkeydown中取消默认行为，则输入的内容不会出现在文本框中
        //return false; // 取消默认行为

        // 文本框中不能输入数字，数字keyCode 48~57
        if(event.keyCode >= 47 && event.keyCode <= 57){
          return false;
        }
      }

    }
    
  </script>

  <script>

  </script>
</body>
</html>