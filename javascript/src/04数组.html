<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数组</title>
  <script>
  // 1 创建数组
  var arr = new Array();
  console.log(typeof arr);

  var arr1 = [];
  console.log(typeof arr1);

  // 向数组添加元素
  arr[0] = 10;
  arr[1] = 20;
  console.log(arr);

  // 2 数组属性
  // 2.1 获取数组长度.length
  console.log(arr.length);

  // 3 数组方法
  // 3.1 push  向数组末尾添加元素，并返回新数组的长度
  var arr2 = ["孙悟空", "猪八戒", "沙和尚"];
  console.log("愿数组：" + arr2);

  result = arr2.push("白龙马");
  console.log("push返回值：" + result);
  console.log("push后：" + arr2);

  arr2.push("蜘蛛精", "玉兔精");
  console.log("push多个后:" + arr2);
  
  // 3.2 pop() 删除并返回数组的最后一个元素
  var result = arr2.pop();	//删除数组最后一个元素
  console.log("pop的返回值：" + result);
  console.log("pop后：" + arr2);

  // 3.3 unshift() 数组开头添加元素，返回新数组长度
  var result = arr2.unshift("唐僧");
  console.log("unshift的返回值：" + result);
  console.log("unshift后：" + arr2);

  // 3.4 shift() 删除数组的第一个元素，并返回删除的元素
  var result = arr2.shift();
  console.log("shift的返回值：" + result);
  console.log("shift后：" + arr2);

  // 3.5 slice(star,end) 从已有数组选出某个元素，并返回选出的数组元素，不会影响原数组
  /* 参数：
          1：必须-截取开始的索引位置；
          2：可选-截取结束的索引位置，不包含结束索引，可以不写，意为至结束所有元素；
      可以是负值slice(star,-end) 意为倒数第end；
  */ 
  result = arr2.slice(1, 3);
  console.log(result);
  result = arr2.slice(1, -1);
  console.log(result);
  console.log("slice后：" + arr2);

  // 3.6 splice() 删除数组中的指定元素，并向数组添加新元素，删除的元素作为返回值，会影响原数组
  /* 参数：
        1: 必须-删除开始的索引位置；
        2: 必须-删除的元素数量；
        3: 可选-添加的元素
  */
  result = arr2.splice(0,1);
  console.log(result);
  console.log("splice-2个参数后：" + arr2);

  result = arr2.splice(0,0, "唐僧","孙悟空");
  console.log(result);
  console.log("splice-3个参数后：" + arr2);

  //练习：去除数组中重复数字,注意多次重复
  var arr41 = [1,2,6,3,2,2,1,4,5,2,6];
  for(var i=0; i<arr41.length; i++){
    var curNum = arr41[i];
    for(var j=i+1; j<arr41.length; j++){
      if(curNum == arr41[j]){
        arr41.splice(j,1);
        // 当删除当前j的元素后，后面元素自动部位，需要在比较一次当前j所在的位置元素
        j--; //当删除一个元素后，前移一位
      }
    }
    console.log(arr41);
  }
  console.log("去除重复后：" + arr41);

  // 数组的其他方法
  var arr42 = ["唐僧", "孙悟空", "猪八戒", "沙和尚", "白龙马"];
  var arr43 = ["蜘蛛精", "玉兔精", "白骨精"];
  var arr44 = ["太上老君", "太白金星", "二郎神"];
  var arr45 = ["a", "c", "d", "b"];
  var arr46 = [1, 2, 5, 3, 4, 11]
  
  // 3.7 contact() 连接数组,并返回连接结果。不会影响原数组。
  var result = arr42.concat(arr43, arr44, "牛魔王");
  console.log(result);

  // 3.8 join() 将数组转为字符串返回，不会影响原数组
  var result = arr42.join("-")
  console.log(result);
  console.log(typeof result);

  // 3.9 reverse() 翻转字符串元素,返回翻转后的数组，会影响原数组
  var result = arr42.reverse();
  console.log(result);
  console.log(arr42);

  // 3.10 sort()  数组元素排序,会影响原数组,unicode编码排序
  /*可以在sort() 中添加回调函数来指定排序方式
  - 回调函数中需要定义两个参数
  - 浏览器将分别使用数组中的元素作为参数去调用回调函数
  - 使用那个元素不确定，但确定的是数组中第一个参数一定在第二个之前。

  浏览器根据回调函数的返回值决定元素的位置

  - 返回值>0，则元素交换位置
  - 返回值<0，则不交换
  - 返回值=0，则不交换
  */
  var result = arr42.sort();
  console.log(result);
  console.log(arr42);

  var result = arr45.sort();
  console.log(result);
  console.log(arr45);

  // 纯数字数组也按照unicode编码排序
  var result = arr46.sort();
  console.log(result);
  console.log(arr46);
  
  // 自定义排序方式
  var arr47 = [5, 4, 3, 6]
  arr47.sort(function(a, b){
    console.log("a = " + a);
    console.log("b = " + b);
    //a = 4, b = 5;
    //a = 3, b = 4;
    //a = 6, b = 3;
    console.log(typeof a);
    // if(a>b){
    //   return -1;
    // }
    // if改进
    return b-a
  })
  console.log(arr47);

  


  // 4 数组遍历
  // 4.1 for循环
  var arr4 = ["唐僧", "孙悟空", "猪八戒", "沙和尚", "白龙马"];
  for(var i=0; i<arr4.length; i++){
    console.log(arr4[i]);
  }

  // 练习
  function Person(name, age){
    this.name = name;
    this.age =age;
  }

  //修改Person原型的toString
  Person.prototype.toString = function(){
    return "Person[name:" + this.name + ",age:" + this.age + "]";
  }

  //创建Person对象
  var per = new Person("孙悟空", 18);
  var per2 = new Person("猪八戒", 28);
  var per3 = new Person("沙和尚", 38);
  var per4 = new Person("红孩儿", 8);

  // 将对象保存在数组
  var perArr = [per, per2, per3, per4];
  console.log(perArr);

  // 要求：提取满18岁的对象，然后封装到新数组中返回

  // 实现：
  function getAdult(arr){
    var arrAdult = [];
    //console.log(arr);
    for(var i=0; i< arr.length; i++){
      //console.log(arr[i].age);
      if(arr[i].age > 18){
        arrAdult.push(arr[i]);
      }
    }
    return arrAdult;
  }

  result = getAdult(perArr);
  console.log(result);

  // edn 练习

  // 4.2 forEach方法 
  /*      - 支持IE8+
          - 函数作为参数
          - 执行次数是元素个数，每次执行将遍历的实参作为参数传递进来；
          - 传递参数3个，依次为:当前遍历的数组元素，当前遍历的数组索引，遍历的数组
  */
  var arr5 = ["唐僧", "孙悟空", "猪八戒", "沙和尚", "白龙马"];
  arr5.forEach(function(value, index, arr){
    //console.log('西游记');
    console.log(value);
    console.log(index);
    console.log(arr);
  })

  </script>
</head>
<body>
  
</body>
</html>